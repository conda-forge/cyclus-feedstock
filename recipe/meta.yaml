{% set version = "dev" %}

package:
  name: cyclus
  version: {{ version }}

source:
  git_url: https://github.com/cyclus/cyclus.git
  git_rev: main

build:
  number: 5
  skip: true  # [win]
  detect_binary_files_with_prefix: true
  preserve_egg_dir: true
    
requirements:
  build:
    - cmake
    - make
    - pkg-config
    - {{ stdlib('c') }}
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    # For arm64 cross-compilation
    - python  # [build_platform != target_platform]
    - cross-python_{{ target_platform }}  # [build_platform != target_platform]
    - cython  # [build_platform != target_platform]
    - numpy  # [build_platform != target_platform]
  host:
    - python
    - pip
    - setuptools
    - cython
    - numpy
    - pandas
    - jinja2
    # C/C++ libraries
    - bzip2
    - coin-or-cbc
    - coin-or-cgl
    - coin-or-clp
    - coin-or-osi
    - coin-or-utils
    - glib
    - glibmm
    - hdf5
    - icu
    - libaec
    - libblas  # [not osx]
    - libboost-devel
    - libcurl
    - libiconv
    - liblapack  # [not osx]
    - libxmlpp-4.0
    - libxml2
    - openssl
    - sigcpp-3.0
    - sqlite
    - zlib
  run:
    - python
    - pandas


test:
  requires:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - pytest
    - pytables
  source_files:
    - tests
    - share/dbtypes.json
    - src/hdf5_back_gen.py

about:
  home: http://fuelcycle.org/
  license: BSD-3-Clause
  license_file: LICENSE.rst
  summary: "The agent-based fuel cycle simulator."

extra:
  recipe-maintainers:
    - gonuke
    - katyhuff
    - FlanFlanagan
    - bennibbelink
    - munkm
    - abachma2
